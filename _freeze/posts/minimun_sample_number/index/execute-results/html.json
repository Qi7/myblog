{
  "hash": "a9bc7d749ebc91a9fb2a7d95521be0ce",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"How to Determine the Minimum Sample Size for an A/B Test?\"\nauthor: \"Qi Wang\"\ndate: 2024-12-20\ncategories: [\"statistics\"]\nformat: \n  html\nexecute: \n  warning: false\n  error: false\n  cache: false\n  freeze: auto\ntoc: true\ntoc-depth: 3\nnumber-sections: true\n---\n\n\n\nI’m currently on the job hunt and preparing for interviews that involve experimental design and A/B testing. Initially, I found the formula for calculating the minimum sample size for A/B testing a bit daunting. However, after some drawing, calculations, and recalling basic statistics, I realized it’s actually quite manageable. So, I decided to write this blog to explain the formula—both as a reference for my future self and to help anyone else who might find it helpful.\n\n## My Shiny App for This Problem \n\nI created a Shiny app to explore this problem. With the app, you can input your own parameters and experiment with different sample sizes to see how they impact the effectiveness of statistical tests. Check it out here: [Minimum Sample Size for A/B Testing](https://qiw57.shinyapps.io/minimum_sample_size_for_ab_testing/).\n\n\n## The Formula\n\n$$ n = \\frac{\\sigma^2}{\\Delta^2}(z_{\\alpha/2} + z_\\beta)^2 $$\n\nSo here,\n\n- $\\sigma^2$ : The variance of the population, representing the spread of the population data around its mean.\n\n- $\\Delta$ : The minimum detectable effect (MDE), which is the smallest difference between groups that the test aims to reliably detect.\n\n- $z_x$ : The critical value corresponding to the level  x , such that  $P(Z > z_x) = x$ , where  Z  follows a standard normal distribution ( $Z \\sim N(0,1)$ ).\n\nThe Statistical Test\n\nHere’s how we typically test whether there are significant differences between two groups, A and B. We compute the t-statistic using the formula:\n\n$$\nt = \\frac{\\bar{X}_A - \\bar{X}_B}{\\bar{\\sigma}}\n$$\n\nWhere  $\\bar{X}_A$  and  $\\bar{X}_B$  are the sample means of groups A and B, respectively, and  $\\bar{\\sigma}$  is the standard error.\n\nThe null hypothesis states that there is no difference between the means of the two groups, i.e.,\n\n$$\nH_0: \\mu_A = \\mu_B\n$$\n\nThe intuition behind this test is straightforward: if the difference between the group means is large enough, we can reject the null hypothesis. Under the null hypothesis, such a difference would be very unlikely, so instead of accepting it as a mere coincidence, we reject it. In doing so, we conclude that the distributions of population A and population B are significantly different.\n\nLet’s assume that Group A is the control group, representing the status quo, and Group B is the treatment group. In Statistics 101, we learned that the distribution of the sample mean is:\n\n$$\n\\bar{X} \\sim N\\left(\\mu, \\frac {\\sigma}{\\sqrt{n}}\\right)\n$$\n\nIntuitively, this means that as the sample size increases, the standard error (and hence the spread) of the sample mean  $\\bar{X}$  decreases.\n\n\n\n::: {#fig-rejection .cell layout-ncol=\"2\"}\n::: {.cell-output-display}\n![large sample size](index_files/figure-html/fig-rejection-1.png){#fig-rejection-1 width=672}\n:::\n\n::: {.cell-output-display}\n![small sample size](index_files/figure-html/fig-rejection-2.png){#fig-rejection-2 width=672}\n:::\n\nStandard Deviation and the Rejection Threshold\n:::\n\n\n\nIf we have a large number of samples, the rejection threshold for the mean statistic becomes smaller. As the threshold decreases, the power of the test increases, making it less likely to accept the null hypothesis when there is a true effect.\n\n## The Power and the Trade-offs Between Type I and Type II Errors\n\nNot finished. To be continued.\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![The Distributions of the means of the Controlled and Treated Groups](index_files/figure-html/fig-dist-1.png){#fig-dist width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}